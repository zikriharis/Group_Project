{% extends "base.html" %}
{% block content %}
<h2>Manage Team for {{ organization.name }}</h2>
<form method="post">
  {% csrf_token %}
  <label for="email">Invite Campaign Manager (max 5 per campaign):</label>
  <input type="email" name="email" id="email" required>
  <button type="submit">Send Invitation</button>
</form>
<h3>Current Managers</h3>
<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Campaigns</th>
    <th>Actions</th>
  </tr>
  {% for manager in managers %}
    <tr>
      <td>{{ manager.user.get_full_name }}</td>
      <td>{{ manager.user.email }}</td>
      <td>
        {% for campaign in manager.campaigns.all %}
          <a href="{% url 'campaign_detail' campaign.slug %}">{{ campaign.title }}</a>{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </td>
      <td>
        <form method="post" action="{% url 'remove_manager' manager.user.id %}">
          {% csrf_token %}
          <button type="submit" onclick="return confirm('Remove this manager?');">Remove</button>
        </form>
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="4">No managers assigned.</td></tr>
  {% endfor %}
</table>
{% endblock %}