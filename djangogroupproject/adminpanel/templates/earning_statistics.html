{% extends "base.html" %}
{% block content %}
<h2>Platform Earnings & Statistics</h2>
<ul>
  <li>Total Subscription Earnings: {{ stats.total_earnings }}</li>
  <li>Active Campaigns: {{ stats.active_campaigns }}</li>
  <li>Donations Processed: {{ stats.total_donations }}</li>
</ul>
<canvas id="earningsChart" width="400" height="200"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  if (typeof Chart !== 'undefined') {
    const ctx = document.getElementById('earningsChart').getContext('2d');
    const earningsChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: {{ stats.earnings_dates|safe }},
        datasets: [{
          label: 'Earnings',
          data: {{ stats.earnings_amounts|safe }},
          fill: false,
          borderColor: '#16a085'
        }]
      }
    });
  } else {
    console.error('Chart.js is not loaded.');
  }
</script>

{% endblock %}