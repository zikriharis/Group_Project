{% extends "base.html" %}
{% block content %}
<h2>Manage User Roles</h2>
<table>
  <tr>
    <th>User</th>
    <th>Email</th>
    <th>Current Role</th>
    <th>Change Role</th>
  </tr>
  {% for user in users %}
    <tr>
      <td>{{ user.username }}</td>
      <td>{{ user.email }}</td>
      <td>{{ user.get_role_display }}</td>
      <td>
        <form method="post" action="{% url 'change_user_role' user.id %}">
          {% csrf_token %}
          <select name="role">
            <option value="donor" {% if user.role == "donor" %}selected{% endif %}>Donor</option>
            <option value="organization" {% if user.role == "organization" %}selected{% endif %}>Organization</option>
            <option value="manager" {% if user.role == "manager" %}selected{% endif %}>Manager</option>
            <option value="admin" {% if user.role == "admin" %}selected{% endif %}>Admin</option>
          </select>
          <button type="submit">Update</button>
        </form>
      </td>
    </tr>
  {% endfor %}
</table>
{% endblock %}