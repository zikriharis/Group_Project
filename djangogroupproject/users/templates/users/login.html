{% extends 'main_landing_pages/base.html' %}
{% load static %}

{% block title %}Login - FundMe{% endblock %}



{% block content %}
<div class="min-h-screen gradient-bg flex flex-col justify-center py-12 sm:px-6 lg:px-8">
    <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md">
        <div class="bg-white py-8 px-4 shadow-2xl rounded-2xl sm:px-10">
            <div class="mb-10 text-center">
                <a href="{% url 'main_landing_pages:landing' %}" class="inline-block mb-6">
                    <span class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600">Fund</span><span class="text-5xl font-bold text-indigo-600">Me</span><i class="fas fa-hand-holding-heart text-4xl text-purple-500 ml-2"></i>
                </a>
                <h2 class="text-3xl font-extrabold text-gray-900">
                    Sign in to your account
                </h2>
                <p class="mt-2 text-sm text-gray-600">
                    Don't have an account? <a href="{% url 'users:register' %}" class="font-medium text-indigo-600 hover:text-indigo-500">
                        Sign up
                    </a>
                </p>
            </div>

        {% if messages %}
            <div class="space-y-2 mb-6">
            {% for message in messages %}
                <div class="p-3 rounded-md text-sm 
                    {% if message.tags == 'success' %} bg-green-50 text-green-700 border border-green-200 
                    {% elif message.tags == 'error' %} bg-red-50 text-red-700 border border-red-200 
                    {% else %} bg-blue-50 text-blue-700 border border-blue-200 
                    {% endif %}"
                     role="alert">
                    {{ message }}
                </div>
            {% endfor %}
            </div>
        {% endif %}

        <form method="post" novalidate class="space-y-6">
            {% csrf_token %}
            
            <div>
                <label for="{{ form.username.id_for_label }}" class="block text-sm font-medium text-gray-700">Username</label>
                <div class="mt-1">
                    {{ form.username }} {# JS will add .form-input #}
                </div>
                {% if form.username.errors %}
                    <div class="mt-1">
                    {% for error in form.username.errors %}
                        <p class="text-xs text-red-600">{{ error }}</p>
                    {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div>
                <label for="{{ form.password.id_for_label }}" class="block text-sm font-medium text-gray-700">Password</label>
                <div class="mt-1">
                    {{ form.password }} {# JS will add .form-input #}
                </div>
                {% if form.password.errors %}
                    <div class="mt-1">
                    {% for error in form.password.errors %}
                        <p class="text-xs text-red-600">{{ error }}</p>
                    {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <input id="remember_me" name="remember_me" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                    <label for="remember_me" class="ml-2 block text-sm text-gray-900"> Remember me </label>
                </div>

                <div class="text-sm">
                    <a href="#" onclick="alert('Password reset functionality will be implemented soon!')" class="font-medium text-indigo-600 hover:text-indigo-500"> Forgot your password? </a>
                </div>
            </div>

            <div>
                <button type="submit" class="w-full btn-primary py-2.5">
                    Sign In
                </button>
            </div>
        </form>


    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const usernameField = document.getElementById('{{ form.username.id_for_label }}');
    const passwordField = document.getElementById('{{ form.password.id_for_label }}');

    if (usernameField) {
        usernameField.classList.add('form-input'); // We will define .form-input in base.html with @apply
    }
    if (passwordField) {
        passwordField.classList.add('form-input'); // We will define .form-input in base.html with @apply
    }

    // Basic form validation (can be improved later)
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            if (usernameField && passwordField && (!usernameField.value.trim() || !passwordField.value.trim())) {
                e.preventDefault();
                // Consider replacing alert with a Tailwind-styled message integrated into the form
                alert('Please fill in all username and password fields.');
            }
        });
    }
});
</script>
{% endblock %}
